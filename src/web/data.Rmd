---
title: "Data"
---

##**Cropland Data Layer**
The purpose of the Cropland Data Layer is to use satellite imagery to provide acreage estimates to the Agricultural Statistics Board for major commodities and to produce digital, crop-specific, categorized geo-referenced output products. The spatial resolution is 30 meters covering the Continental United States. However, the data was filter to just Northampton and Accomack County. The years of avaiable data for these two counties were 2021 to 2008 and 2002. The orginal CDL data can be found [here](https://croplandcros.scinet.usda.gov). 

The CDL data is avaiable in raster-based GeoTIFF (.TIF) file format or can be obtain as a simple features object through an R Package called 'CropScapeR'. The data was import through 'CropScapeR' because the geometry was necessary to link this Cropland Data Layer to counties' parcel geometries. The cooridinates of the CDL data are the coordinates of the centroid of the raster cells in a point geometry. From these centroids, a buffer was added to create the 30x30m resolution and polygon geometry. This was essential step to be able to intersect with the counties' parcel geometries in order to find the area of each crop in specific parcels. Two checks were in place to ensure this buffer was preformed correctly. First, an area column was added to the dataset to ensure each tile had an area of 900 square meters. Second, the first 30 tiles were simply ploted to ensure no overlap. (see plot below)

![](www/CDLTilePlot.png){width=40%}</center>

From here, each tile of a specific crop type was subsetted and intersected with the ArcGIS parcel data for the two counties. Then, grouped by a specfic parcel ID, the geometries of each tile were joined within that parcel to create the coordinates of a crop within a unique parcel. Finally to obtain the percent of the crop in each parcel, the area of the crop in a parcel was divided by the total area in the parcel and multiplied by 100. Below is a example of the process with corn for Accomack county. 

####*1. Start with Corn Tiles*

```{r, layout="l-body-outset", echo = FALSE, results = 'asis'}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/corn_accomack1.RDS"))

```
Subset of Corn Tiles in Accomack County



####*2. Intersect Corn Tiles with Parcel Cooridinates*
Notice the repeat of parcel IDs. In the next step will combine all corn tiles into one geometry for one unique parcel.

```{r, layout="l-body-outset", echo = FALSE, results = 'asis'}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/corn_accomack2.RDS"))
```
Corn Tiles intersection with Parcls in Accomack County



####*3. Group Corn Tiles by Parcel ID*
Notice how there are no longer repeat parcel IDs. 

```{r, layout="l-body-outset", echo = FALSE, results = 'asis'}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/merge_corn_accomack1.RDS"))

```
Corn Area and Geometry for a Unique Parcel



####*4. Attach Parcel Area and Create Percent Area Corn Column*
All that is left is to create a column of percent corn for each parcel. This is done by linking parcel area inot the data from and doing simple math to create this column shown below.

```{r, layout="l-body-outset", echo = FALSE, results = 'asis'}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/merge_corn_accomack2.RDS"))

```
Percent Area of Corn for Each Parcel



####*5. Repetition*
This process is repeated for each crop for each year in both Accomack and Northampton County. A function was created to automate this process. Below are the data sets for Northampton crops and Accomack crops for the year 2021. 

```{r, layout="l-body-outset", echo = FALSE}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/Northampton2021.RDS"))
```

```{r, layout="l-body-outset", echo = FALSE}
library(rmarkdown)
paged_table(readRDS("/home/jme6bk/github/CoastalFutures/Data_and_Codes/Accomack2021.RDS"))
```

The code can be found [here](https://github.com/uva-bi-sdad/dspg22_coastal/tree/master/src/parcels) under the R scripts labeled CDL_Parcel_intersections, CDLfunction, and CDL_exploration. 

##**C-CAP Regional Land Cover and Change**

##**Parcels Data**

##**Housing Data**

##**ACS Public Use Microdata Sample**

##**Iterative Proportional Fitting data**
